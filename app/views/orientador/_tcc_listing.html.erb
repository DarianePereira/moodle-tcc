<table class="table table-bordered">
  <thead>
  <tr class="blue-header-table">
    <th>Estudante</th>
    <th>Dados</th>
    <th>Resumo</th>
    <th>Introdução</th>
    <% @chapters.each do |chapter_name| %>
      <th><%= chapter_name %></th>
    <% end %>
    <th>Considerações finais</th>
    <th>Referências</th>
  </tr>
  </thead>
  <tbody>
  <% @tccs.each do |tcc| %>

    <%= render :partial => 'orientador/grade_tcc', locals: {tcc: tcc} if @current_user.orientador? %>

    <tr>
      <td>
        <%= tcc.student.name %>
        <%= link_to preview_tcc_path(tcc.student.moodle_id), target: '_blank' do %>
          <small>Visualizar TCC</small>
        <% end %>
        <%= link_to generate_tcc_path(tcc.student.moodle_id), target: '_blank' do %>
          <small>Gerar TCC</small>
        <% end %>
      </td>

      <td>
        <%= link_to 'Editar', show_tcc_path(moodle_user: tcc.student.moodle_id), class: 'label label-success', target: '_blank' %>
      </td>

      <td>
        <%= action_label(tcc.abstract, edit_abstracts_path(moodle_user: tcc.student.moodle_id)) %>
      </td>
      <td>
        <%= action_label(tcc.presentation, edit_presentations_path(moodle_user: tcc.student.moodle_id)) %>
      </td>
      <% tcc.chapter_definitions.each do |chapter_definition| %>
        <% chapter = tcc.chapters.select { |chapter| chapter.position == chapter_definition.position }.first %>

        <% unless chapter.nil? %>
          <td>
            <%= action_label(chapter, show_chapters_path(position: chapter.position, moodle_user: tcc.student.moodle_id)) %>
          </td>
        <% else %>
          <td class="empty-content"/>
        <% end %>

      <% end %>
      <td>
        <%= action_label(tcc.final_considerations, edit_final_considerations_path(moodle_user: tcc.student.moodle_id)) %>
      </td>
      <td>
        <%= link_to 'Editar', bibliographies_path(moodle_user: tcc.student.moodle_id), class: 'label label-success', target: '_blank' %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>