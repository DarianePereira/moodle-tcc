<h3>Lista de Portf√≥lios</h3><br/>

<%= link_to '#', class: 'btn', id: 'refresh-list', title: 'Atualizar lista' do %>
  <%= display_icon('icon-refresh') %> Atualizar lista
<% end %>

<table class="table table-bordered" id="hubs-table">
  <thead>
  <tr class="blue-header-table">
    <th rowspan="2">Estudante</th>
    <th rowspan="2">Grupo</th>
    <% @hubs.each do |hub_name| %>
      <th colspan="2"><%= hub_name %></th>
    <% end %>
  </tr>
  <tr class="blue-header-table">
    <% @hubs.each do |hub_name| %>
      <th class="status">Estado</th>
      <th class="grades">Nota</th>
    <% end %>
  </tr>
  </thead>

  <tbody>
  <% @tccs.each do |tcc| %>
    <tr>
      <td><%= tcc.name %></td>
      <td>
        <% @groups.each do |g| %>
          <%= g.nome if g.id == tcc.tutor_group %>
        <% end %>
      </td>
      <% tcc.hub_definitions.each do |hub_definition| %>
        <% hub = tcc.hubs.hub_portfolio.where(hub_definition_id: hub_definition.id).first %>
        <td class="status">
          <% unless hub.nil? %>
            <%= hub_status_label(hub, tcc.moodle_user) %>
          <% end %>
        </td>
        <td class="grades">
          <% unless hub.nil? %>
            <%= hub.grade if hub.show_grade? %>
          <% end %>
        </td>
      <% end %>
    </tr>
  <% end %>
  </tbody>

</table>
<%= will_paginate @tccs %>
